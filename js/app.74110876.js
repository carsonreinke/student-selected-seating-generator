(function(t){function e(e){for(var r,a,o=e[0],c=e[1],u=e[2],d=0,f=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},s=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/student-selected-seating-generator/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"01be":function(t,e,n){t.exports=n.p+"img/print.375ad447.svg"},"034f":function(t,e,n){"use strict";var r=n("85ec"),i=n.n(r);i.a},"10ea":function(t,e,n){"use strict";var r=n("9dd6"),i=n.n(r);i.a},"199c":function(t,e,n){n("e811")},"1f9e":function(t,e,n){t.exports=n.p+"img/drag.b821668f.svg"},"23be":function(t,e,n){"use strict";var r=n("199c"),i=n.n(r);e["default"]=i.a},"24e9":function(t,e,n){t.exports=n.p+"img/add.fbe4ad2a.svg"},"29ae":function(t,e,n){},"2c46":function(t,e,n){t.exports=n.p+"img/delete.23f0f9f1.svg"},"3dfd":function(t,e,n){"use strict";var r=n("8a85"),i=n("23be"),s=(n("034f"),n("2877")),a=Object(s["a"])(i["default"],r["a"],r["b"],!1,null,null,null);e["default"]=a.exports},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=n("3dfd"),s=n("8c4f"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("BaseHamburger"),r("nav",{staticClass:"pure-menu"},[r("BaseHeader"),r("ul",{staticClass:"pure-menu-list"},[r("li",{staticClass:"pure-menu-item pure-menu-link menu-new",on:{click:t.newVersion}},[r("img",{attrs:{src:n("24e9"),alt:"New"}}),t._v(" New")])]),r("h3",[t._v("Saved")]),r("ul",{staticClass:"pure-menu-list menu-bottom"},t._l(t.versions,(function(e){return r("li",{key:e.id,staticClass:"pure-menu-item pure-menu-link",on:{click:function(n){return t.loadVersion(e)}}},[t._v(t._s(e.name)+" Created On "+t._s(e.createdAtDate().toLocaleString()))])})),0)],1),t._m(0)],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("h2",[t._v("Welcome")]),n("p",[t._v("TODO")])])}],c=n("2f62"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"hamburger",on:{click:t.toggle}},[n("span")])},l=[],d={methods:{toggle:function(t){var e=document.getElementById("app");e.classList.contains("expanded")?e.classList.remove("expanded"):e.classList.add("expanded")}}},f=d,m=n("2877"),p=Object(m["a"])(f,u,l,!1,null,null,null),h=p.exports,v=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},g=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("h1",[t._v("Student Selected Seating Generator")])])}],b=(n("10ea"),{}),O=Object(m["a"])(b,v,g,!1,null,"4040857c",null),k=O.exports,E={name:"version-selector",components:{BaseHamburger:h,BaseHeader:k},computed:Object(c["c"])(["versions"]),methods:{newVersion:function(){var t=this;this.$store.dispatch("newVersion").then((function(){t.$router.push({name:"desk-editor",props:{newVersion:!0}})}))},loadVersion:function(t){var e=this;this.$store.dispatch("loadVersion",t).then((function(){e.$router.push("desks")}))}}},j=E,y=Object(m["a"])(j,a,o,!1,null,null,null),_=y.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"container"}},[r("BaseHamburger"),r("nav",{staticClass:"pure-menu"},[r("BaseHeader"),r("ul",{staticClass:"pure-menu-list"},[r("li",{staticClass:"pure-menu-item pure-menu-link",on:{click:t.next}},[r("img",{attrs:{src:n("6de5"),alt:"Next"}}),t._v(" Next ")]),r("li",{staticClass:"pure-menu-item pure-menu-link",on:{click:t.startOver}},[r("img",{attrs:{src:n("9558"),alt:"Start Over"}}),t._v(" Start Over ")])]),r("h3",[t._v("Edit")]),r("ul",{staticClass:"pure-menu-list menu-bottom"},[r("li",{staticClass:"pure-menu-item pure-menu-link",on:{click:t.addDesk}},[r("img",{attrs:{src:n("24e9"),alt:"Add Desk"}}),t._v(" Add Desk ")]),r("li",{staticClass:"pure-menu-item pure-menu-link",on:{click:t.arrange}},[r("img",{attrs:{src:n("8a5d"),alt:"Arrange"}}),t._v(" Arrange ")])])],1),r("main",[r("Room",{attrs:{editable:""}})],1)],1)},S=[],w=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"room"}},[n("div",{staticClass:"name"},[n("h2",{attrs:{contenteditable:t.isEditable},domProps:{textContent:t._s(t.name)},on:{blur:t.onBlur,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onKeyDown(e)}}})]),t._l(t.allDesks,(function(e){return n("Desk",{key:e.id,attrs:{desk:e,editable:t.isEditable}})}))],2)},R=[],C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:{desk:!0,active:t.isDragging},style:{left:t.desk.position.x+"px",top:t.desk.position.y+"px",transform:"rotate("+t.desk.position.angle+"deg)"},attrs:{draggable:t.isEditable},on:{dragstart:t.onDragStart,dragend:t.onDragEnd,touchstart:t.onDragStart,touchend:t.onDragEnd}},[t._m(0),r("div",{staticClass:"container"},[r("div",{staticClass:"drag-handle"},[t.isEditable?r("img",{attrs:{alt:"Drag Me",src:n("1f9e")}}):t._e()]),r("div",{staticClass:"delete-handle"},[t.isEditable?r("img",{attrs:{alt:"Delete",src:n("2c46")},on:{click:function(e){return t.removeDesk(t.desk)}}}):t._e()]),r("div",{staticClass:"name"},[t._v(t._s(t.name()))]),r("div",{class:{"rotate-handle":!0,active:t.isRotating}},[t.isEditable?r("img",{attrs:{alt:"Rotate Me",src:n("600a")},on:{mousedown:t.onRotateStart,touchstart:t.onRotateStart}}):t._e()]),r("div",{staticClass:"clear"})])])},x=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"icon"},[r("img",{attrs:{alt:"",src:n("8641")}})])}];n("b0c0");function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){Object(w["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $=180/Math.PI,M={name:"desk",props:{desk:Object,editable:Boolean},computed:{isEditable:function(){return this.editable},isRotating:function(){return null!==this.rotating},isDragging:function(){return null!==this.initialPosition}},data:function(){return{initialPosition:{},rotating:null}},methods:A({},Object(c["b"])(["moveDesk","removeDesk","rotateDesk"]),{name:function(){var t=this.desk;return null===t.student?"Student":t.student.name},onDragStart:function(t){this.initialPosition={x:t.clientX,y:t.clientY}},onDragEnd:function(t){var e=this.desk,n=t.target,r=t.clientX-this.initialPosition.x+n.offsetLeft,i=t.clientY-this.initialPosition.y+n.offsetTop;r<0&&(r=0),i<0&&(i=0);var s=n.parentElement;if(s){var a=s.getBoundingClientRect(),o=n.getBoundingClientRect();r>a.width-o.width&&(r=a.width-o.width),i>a.height-o.height&&(i=a.height-o.height)}this.moveDesk({desk:e,x:r,y:i}),this.initialPosition=null},onRotateStart:function(t){var e=this.desk,n=t.target,r=n.parentElement.parentElement.getBoundingClientRect();t.preventDefault(),t.stopPropagation(),this.rotating={angle:e.position.angle,rotation:0,start:0,events:{move:this.onRotate.bind(this),up:this.onRotateEnd.bind(this)},center:{x:r.left+r.width/2,y:r.top+r.height/2}};var i=t.clientX-this.rotating.center.x,s=t.clientY-this.rotating.center.y;this.rotating.start=$*Math.atan2(s,i),document.body.addEventListener("mousemove",this.rotating.events.move),document.body.addEventListener("mouseup",this.rotating.events.up),document.body.addEventListener("touchmove",this.rotating.events.move),document.body.addEventListener("touchend",this.rotating.events.up)},onRotateEnd:function(t){var e=this.desk;this.rotating&&(this.rotateDesk({desk:e,angle:this.rotating.angle+this.rotating.rotation}),document.body.removeEventListener("mousemove",this.rotating.events.move),document.body.removeEventListener("mouseup",this.rotating.events.up),document.body.removeEventListener("touchmove",this.rotating.events.move),document.body.removeEventListener("touchend",this.rotating.events.up),this.rotating=null)},onRotate:function(t){var e,n,r,i=this.desk;t.preventDefault(),t.stopPropagation(),this.rotating&&(t.preventDefault(),n=t.clientX-this.rotating.center.x,r=t.clientY-this.rotating.center.y,e=$*Math.atan2(r,n),this.rotating.rotation=e-this.rotating.start,this.rotateDesk({desk:i,angle:this.rotating.angle+this.rotating.rotation}))}})},V=M,T=(n("755d"),Object(m["a"])(V,C,x,!1,null,"057ce414",null)),B=T.exports;function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){Object(w["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var H={name:"Room",props:{editable:Boolean},components:{Desk:B},computed:L({},Object(c["c"])(["allDesks","name"]),{isEditable:function(){return this.editable}}),methods:L({},Object(c["b"])(["editName"]),{onBlur:function(t){this.editName(t.target.innerText)},onKeyDown:function(t){t.preventDefault(),t.target.blur()}})},G=H,K=(n("5df8"),Object(m["a"])(G,P,R,!1,null,"1b0ad80e",null)),U=K.exports;function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){Object(w["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F={name:"desk-editor",components:{Room:U,BaseHamburger:h,BaseHeader:k},methods:W({},Object(c["b"])(["addDesk","initialDesks"]),{arrange:function(){var t=this,e=document.getElementById("room").getBoundingClientRect(),n=document.getElementsByClassName("desk")[0].getBoundingClientRect();e&&0!=e.height||(e={width:1280,height:960}),n&&0!=n.height||(n={width:50,height:50});var r=Math.floor(e.width/n.width),i=Math.floor(e.height/n.height);if(r*i<this.$store.getters.deskCount)throw new Error("Too many desks to arrange");var s=Math.floor(r/(r+i)*this.$store.getters.deskCount),a=Math.ceil(i/(r+i)*this.$store.getters.deskCount),o=e.width/s,c=e.height/a,u=o/2-n.width/2,l=c/2-n.height/2;this.$store.getters.allDesks.forEach((function(e,n){var r=n%s,i=Math.floor(n/s);t.$store.dispatch("moveDesk",{desk:e,x:r*o+u,y:i*c+l})}))},next:function(){this.$router.push("students")},startOver:function(){this.$router.push("/")}}),beforeRouteEnter:function(t,e,n){n((function(t){t.$store.getters.isEmpty?t.$router.push("/"):t.$store.getters.newVersion&&(setTimeout(t.arrange,0),t.$store.dispatch("newVersion",!1))}))}},X=F,Y=Object(m["a"])(X,D,S,!1,null,null,null),z=Y.exports,q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"container"}},[r("BaseHamburger"),r("nav",{staticClass:"pure-menu"},[r("BaseHeader"),r("ul",{staticClass:"pure-menu-list"},[r("li",{staticClass:"pure-menu-item pure-menu-link",on:{click:t.next}},[r("img",{attrs:{src:n("6de5"),alt:"Next"}}),t._v(" Next ")]),r("li",{staticClass:"pure-menu-item pure-menu-link",on:{click:t.previous}},[r("img",{attrs:{src:n("c9a6"),alt:"Previous"}}),t._v(" Previous ")]),r("li",{staticClass:"pure-menu-item pure-menu-link",on:{click:t.startOver}},[r("img",{attrs:{src:n("9558"),alt:"Start Over"}}),t._v(" Start Over ")])])],1),r("main",[r("h2",[t._v("Students")]),r("p",[t._v("TODO")]),t._l(t.allStudents,(function(t){return r("Student",{key:t.id,attrs:{student:t}})}))],2)],1)},Q=[],Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"student"},[n("div",{staticClass:"name"},[n("input",{attrs:{type:"text",placeholder:"Student name"},domProps:{value:t.student.name},on:{input:t.onNameChange}})]),n("multiselect",{attrs:{multiple:!0,value:t.preferences,options:t.otherStudents,label:"name","track-by":"id",searchable:!1,"close-on-select":!0,"allow-empty":!0,placeholder:"Student preferences"},on:{select:t.onPreferenceSelect,remove:t.onPreferenceRemove}})],1)},tt=[],et=(n("7db0"),n("caad"),n("2532"),n("8e5f")),nt=n.n(et);n("e607");function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){Object(w["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var st={name:"student",props:{student:Object},components:{Multiselect:nt.a},computed:{otherStudents:function(){var t=this,e=this.$store.getters.allStudents;return e.filter((function(e){return e!==t.student})).filter((function(t){return null!==t.name})).filter((function(e){return!t.student.preferences.includes(e)}))},preferences:function(){return this.student.preferences}},methods:it({},Object(c["b"])(["changeStudentName","addPreference","removePreference"]),{onNameChange:function(t){var e=this.student;this.changeStudentName({student:e,name:t.target.value})},onPreferenceSelect:function(t){var e=this.student,n=this.$store.getters.allStudents.find((function(e){return e.id===t.id}));this.addPreference({student:e,preference:n})},onPreferenceRemove:function(t){var e=this.student,n=this.$store.getters.allStudents.find((function(e){return e.id===t.id}));this.removePreference({student:e,preference:n})}})},at=st,ot=(n("a619"),Object(m["a"])(at,Z,tt,!1,null,null,null)),ct=ot.exports,ut={name:"student-editor",components:{Student:ct,BaseHamburger:h,BaseHeader:k},computed:Object(c["c"])(["allStudents"]),methods:{previous:function(){this.$router.push("desks")},next:function(){this.$router.push("report")},startOver:function(){this.$router.push("/")}},created:function(){this.$store.getters.isEmpty&&this.$router.push("/"),this.$store.dispatch("normalize")}},lt=ut,dt=Object(m["a"])(lt,q,Q,!1,null,null,null),ft=dt.exports,mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"container"}},[r("BaseHamburger"),r("nav",{staticClass:"pure-menu"},[r("BaseHeader"),r("ul",{staticClass:"pure-menu-list"},[r("li",{staticClass:"pure-menu-item pure-menu-link",on:{click:t.previous}},[r("img",{attrs:{src:n("c9a6"),alt:"Previous"}}),t._v(" Previous ")]),r("li",{staticClass:"pure-menu-item pure-menu-link",on:{click:t.startOver}},[r("img",{attrs:{src:n("9558"),alt:"Start Over"}}),t._v(" Start Over ")]),r("li",{staticClass:"pure-menu-item pure-menu-link",on:{click:t.print}},[r("img",{attrs:{src:n("01be"),alt:"Print"}}),t._v(" Print ")]),r("li",{staticClass:"pure-menu-item pure-menu-link",on:{click:t.save}},[r("img",{attrs:{src:n("c64f"),alt:"Save"}}),t._v(" Save ")])])],1),r("main",[r("Room")],1)],1)},pt=[],ht={name:"report",components:{Room:U,BaseHamburger:h,BaseHeader:k},methods:{previous:function(){this.$router.push("students")},print:function(){window.print()},save:function(){this.$store.dispatch("saveVersion")},startOver:function(){this.$router.push("/")}},created:function(){this.$store.getters.isEmpty&&this.$router.push("/"),this.$store.dispatch("arrange")}},vt=ht,gt=Object(m["a"])(vt,mt,pt,!1,null,null,null),bt=gt.exports;r["a"].use(s["a"]);var Ot=[{path:"/",name:"version-selector",component:_},{path:"/desks",name:"desk-editor",component:z,props:!0},{path:"/students",name:"student-editor",component:ft},{path:"/report",name:"report-viewer",component:bt}],kt=new s["a"]({routes:Ot}),Et=kt,jt=(n("99af"),n("d81d"),n("fb6a"),n("d3b7"),n("8a79"),n("3ca3"),n("2ca0"),n("ddb0"),n("2909")),yt=n("d4ec"),_t=n("bee2"),Dt=n("99de"),St=n("7e84"),wt=n("262e"),Pt=(n("4fad"),n("53ca")),Rt=n("3835"),Ct=0,xt="__ref__",Nt="__class__",At="__object__",$t="id",Mt="object",Vt=function(){function t(){Object(yt["a"])(this,t),this.id=Ct++}return Object(_t["a"])(t,[{key:"marshal",value:function(t){var e=Object(w["a"])({},Nt,this.constructor.name);t[this.id]=e;for(var n=function(e){var n=t[e.id];return n||(n=e.marshal(t)),Object(w["a"])({},xt,n.id)},r=0,i=Object.entries(this);r<i.length;r++){var s=Object(Rt["a"])(i[r],2),a=s[0],o=s[1];switch(Object(Pt["a"])(o)){case Mt:null===o?e[a]=null:Array.isArray(o)?e[a]=o.map((function(t){return n(t)})):e[a]=n(o);break;default:e[a]=o}}return e}}]),t}(),Tt=function(t){function e(){var t;return Object(yt["a"])(this,e),t=Object(Dt["a"])(this,Object(St["a"])(e).call(this)),t.x=0,t.y=0,t.angle=0,t}return Object(wt["a"])(e,t),Object(_t["a"])(e,[{key:"distance",value:function(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))}}]),e}(Vt),Bt=function(t){function e(){var t;return Object(yt["a"])(this,e),t=Object(Dt["a"])(this,Object(St["a"])(e).call(this)),t.student=null,t.position=new Tt,t}return Object(wt["a"])(e,t),Object(_t["a"])(e,[{key:"move",value:function(t,e){this.position.x=t,this.position.y=e}},{key:"distance",value:function(t){return this.position.distance(t.position)}}]),e}(Vt),It=function(t){function e(){var t;return Object(yt["a"])(this,e),t=Object(Dt["a"])(this,Object(St["a"])(e).call(this)),t.name=null,t.preferences=[],t}return Object(wt["a"])(e,t),Object(_t["a"])(e,[{key:"addPreference",value:function(t){this.preferences.push(t)}},{key:"removePreference",value:function(t){this.preferences=this.preferences.filter((function(e){return e!==t}))}}]),e}(Vt),Lt=function(t){function e(t){var n;return Object(yt["a"])(this,e),n=Object(Dt["a"])(this,Object(St["a"])(e).call(this)),n.desks=[],n.students=[],n.arrangementStrategy=t,n.name="Room",n.createdAt=(new Date).toISOString(),n}return Object(wt["a"])(e,t),Object(_t["a"])(e,[{key:"addDesk",value:function(){var t=new Bt;return this.desks.push(t),t}},{key:"removeDesk",value:function(t){this.desks=this.desks.filter((function(e){return e.id!==t.id}))}},{key:"addStudent",value:function(){var t=new It;return this.students.push(t),t}},{key:"removeStudent",value:function(t){this.students=this.students.filter((function(e){return e.id!==t.id}))}},{key:"arrange",value:function(){this.arrangementStrategy.arrange(this)}},{key:"findStudentDesk",value:function(t){return this.desks.find((function(e){return e.student===t}))}},{key:"createdAtDate",value:function(){return new Date(this.createdAt)}}]),e}(Vt),Ht=(n("a630"),n("c975"),function(t){function e(){return Object(yt["a"])(this,e),Object(Dt["a"])(this,Object(St["a"])(e).call(this))}return Object(wt["a"])(e,t),Object(_t["a"])(e,[{key:"arrange",value:function(t){}},{key:"distance",value:function(t,e,n){var r=t.findStudentDesk(e),i=t.findStudentDesk(n);return r&&i?r.distance(i):0}}]),e}(Vt)),Gt=function(t){function e(){return Object(yt["a"])(this,e),Object(Dt["a"])(this,Object(St["a"])(e).call(this))}return Object(wt["a"])(e,t),Object(_t["a"])(e,[{key:"averageDistance",value:function(t,e){var n=this;if(0===e.preferences.length)return 0;var r=e.preferences.reduce((function(r,i){return r+n.distance(t,e,i)}),0);return r/e.preferences.length}},{key:"totalAverageDistance",value:function(t){var e=this;return t.students.reduce((function(n,r){return n+e.averageDistance(t,r)}),0)}},{key:"assignDesks",value:function(t,e){e.forEach((function(e,n){t.desks[n].student=t.students[e]}))}},{key:"arrange",value:function(t){var e=this,n=Object(jt["a"])(t.students.keys());this.assignDesks(t,n),t.students.forEach((function(r,i){var s=n.indexOf(i);n=n.reduce((function(n,r,i,a){e.assignDesks(t,n);var o=e.totalAverageDistance(t),c=Array.from(a);c[i]=a[s],c[s]=r,e.assignDesks(t,c);var u=e.totalAverageDistance(t);return u<o?c:n}),n),e.assignDesks(t,n)}))}}]),e}(Ht),Kt=(n("4e82"),function(t){function e(){return Object(yt["a"])(this,e),Object(Dt["a"])(this,Object(St["a"])(e).call(this))}return Object(wt["a"])(e,t),Object(_t["a"])(e,[{key:"arrange",value:function(t){var e=Object(jt["a"])(t.students);e.sort((function(){return Math.random()})),t.desks.forEach((function(t,n){t.student=e[n]}))}}]),e}(Ht)),Ut=[Vt,Ht,Gt,Kt,Tt,Bt,It,Lt];var Jt,Wt,Ft=function t(e,n){var r=Ut.find((function(t){return t.name==e.__class__}));if(!r)throw new Error('Cannot find class "'.concat(e.__class__,'"'));var i=new r;n[e.id][At]=i;for(var s=function(e){var r=n[e.__ref__],i=r[At];return i||(i=t(r,n)),i},a=0,o=Object.entries(e);a<o.length;a++){var c=Object(Rt["a"])(o[a],2),u=c[0],l=c[1];if(u!==$t&&u!==At&&u!==Nt)switch(Object(Pt["a"])(l)){case Mt:null===l?i[u]=null:Array.isArray(l)?i[u]=l.map((function(t){return s(t)})):i[u]=s(l);break;default:i[u]=l}}return i};r["a"].use(c["a"]);var Xt="sssg-",Yt="-refs",zt=6,qt=function(t){var e={},n=t.createdAt;window.localStorage.setItem("".concat(Xt).concat(n),JSON.stringify(t.marshal(e))),window.localStorage.setItem("".concat(Xt).concat(n).concat(Yt),JSON.stringify(e))},Qt=function(t){var e=JSON.parse(window.localStorage.getItem("".concat(t))),n=JSON.parse(window.localStorage.getItem("".concat(t).concat(Yt)));return Ft(e,n)},Zt=new c["a"].Store({state:{room:new Lt(new Gt),versions:[],newVersion:!1},getters:{allDesks:function(t){return t.room.desks},deskCount:function(t){return t.room.desks.length},isEmpty:function(t){return 0===t.room.desks.length},allStudents:function(t){return t.room.students},studentCount:function(t){return t.room.students.length},versions:function(t){return t.versions},newVersion:function(t){return t.newVersion},name:function(t){return t.room.name}},actions:(Jt={addDesk:function(t){var e=t.commit;e("ADD_DESK")},moveDesk:function(t,e){var n=t.commit,r=e.desk,i=e.x,s=e.y;n("EDIT_DESK_POSITION",{desk:r,x:i,y:s})},rotateDesk:function(t,e){var n=t.commit,r=e.desk,i=e.angle;n("EDIT_DESK_ANGLE",{desk:r,angle:i})},removeDesk:function(t,e){var n=t.commit;n("REMOVE_DESK",e),e.student&&n("REMOVE_STUDENT",e.student)},arrange:function(t){var e=t.commit;e("ARRANGE")},addStudent:function(t){var e=t.commit;return e("ADD_STUDENT")},removeStudent:function(t,e){var n=t.commit;n("REMOVE_STUDENT",e),e.desk&&n("REMOVE_DESK",e.desk)},normalize:function(t){var e=t.getters.deskCount-t.getters.studentCount;e<0?t.getters.allStudents.slice(e).forEach((function(e){return t.dispatch("removeStudent",e)})):e>0&&Object(jt["a"])(Array(e)).forEach((function(){return t.dispatch("addStudent")}))},changeStudentName:function(t,e){var n=t.commit,r=e.student,i=e.name;n("CHANGE_STUDENT_NAME",{student:r,name:i})},addPreference:function(t,e){var n=t.commit,r=e.student,i=e.preference;n("ADD_PREFERENCE",{student:r,preference:i})},removePreference:function(t,e){var n=t.commit,r=e.student,i=e.preference;n("REMOVE_PREFERENCE",{student:r,preference:i})}},Object(w["a"])(Jt,"arrange",(function(t){var e=t.commit;e("ARRANGE")})),Object(w["a"])(Jt,"newVersion",(function(t){return t.commit("CLEAR_ROOM"),t.dispatch("toggleNewVersion",!0).then((function(){return Promise.all(Object(jt["a"])(Array(zt)).map((function(){t.dispatch("addDesk")})))})).then((function(){return t.dispatch("normalize")}))})),Object(w["a"])(Jt,"versions",(function(t){var e=t.commit;e("CLEAR_VERSIONS"),Object(jt["a"])(Array(window.localStorage.length)).map((function(t,e){return window.localStorage.key(e)})).filter((function(t){return t.startsWith(Xt)})).filter((function(t){return!t.endsWith(Yt)})).forEach((function(t){var n;try{n=Qt(t)}catch(r){console.error(r)}e("ADD_VERSION",n)}))})),Object(w["a"])(Jt,"loadVersion",(function(t,e){var n=t.commit;n("LOAD_ROOM",e)})),Object(w["a"])(Jt,"saveVersion",(function(t){var e=t.state.room;qt(e),t.state.versions.includes(e)||t.commit("ADD_VERSION",e)})),Object(w["a"])(Jt,"toggleNewVersion",(function(t,e){var n=t.commit;n("TOGGLE_NEW_VERSION",e)})),Object(w["a"])(Jt,"editName",(function(t,e){var n=t.commit;n("EDIT_NAME",e)})),Jt),mutations:(Wt={ADD_DESK:function(t){t.room.addDesk()},EDIT_DESK_POSITION:function(t,e){var n=e.desk,r=e.x,i=e.y;n.position.x=r,n.position.y=i},EDIT_DESK_ANGLE:function(t,e){var n=e.desk,r=e.angle;n.position.angle=r},REMOVE_DESK:function(t,e){t.room.removeDesk(e)},ARRANGE:function(t){t.room.arrange()},ADD_STUDENT:function(t){var e=t.room.addStudent();e.name="Student ".concat(t.room.students.length)},REMOVE_STUDENT:function(t,e){t.room.removeStudent(e)},CHANGE_STUDENT_NAME:function(t,e){var n=e.student,r=e.name;n.name=r},ADD_PREFERENCE:function(t,e){var n=e.student,r=e.preference;n.addPreference(r)},REMOVE_PREFERENCE:function(t,e){var n=e.student,r=e.preference;n.removePreference(r)}},Object(w["a"])(Wt,"ARRANGE",(function(t){t.room.arrange()})),Object(w["a"])(Wt,"CLEAR_ROOM",(function(t){t.room=new Lt(new Gt)})),Object(w["a"])(Wt,"LOAD_ROOM",(function(t,e){t.room=e})),Object(w["a"])(Wt,"CLEAR_VERSIONS",(function(t){t.versions=[]})),Object(w["a"])(Wt,"ADD_VERSION",(function(t,e){t.versions.push(e)})),Object(w["a"])(Wt,"TOGGLE_NEW_VERSION",(function(t){t.newVersion=!t.newVersion})),Object(w["a"])(Wt,"EDIT_NAME",(function(t,e){t.room.name=e})),Wt)});r["a"].config.productionTip=!1,new r["a"]({router:Et,store:Zt,render:function(t){return t(i["default"])},created:function(){this.$store.dispatch("versions")}}).$mount("#app")},"5df8":function(t,e,n){"use strict";var r=n("f852"),i=n.n(r);i.a},"600a":function(t,e,n){t.exports=n.p+"img/rotate.eb2867f4.svg"},6138:function(t,e,n){},"6de5":function(t,e,n){t.exports=n.p+"img/forward.454ef426.svg"},"755d":function(t,e,n){"use strict";var r=n("29ae"),i=n.n(r);i.a},"85ec":function(t,e,n){},8641:function(t,e,n){t.exports=n.p+"img/desk.33c172f9.svg"},"8a5d":function(t,e,n){t.exports=n.p+"img/arrange.1d94953b.svg"},"8a85":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[];n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}))},9558:function(t,e,n){t.exports=n.p+"img/start-over.02eb0042.svg"},"9dd6":function(t,e,n){},a619:function(t,e,n){"use strict";var r=n("6138"),i=n.n(r);i.a},c64f:function(t,e,n){t.exports=n.p+"img/save.552cc20e.svg"},c9a6:function(t,e,n){t.exports=n.p+"img/back.8a6294af.svg"},f852:function(t,e,n){}});
//# sourceMappingURL=app.74110876.js.map